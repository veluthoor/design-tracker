import { NextResponse } from "next/server";
import { getDb } from "@/lib/mongodb";

const SEED_DATA = [
  { tags: "Tintin", taskName: "Get Help + Tickets", description: "Allowing users to see and create tickets by verifying their email.", status: "Not started", assignee: "Kunal Verma", taskType: "â­ï¸ Feature", delivery: "2026-01-20", attachFile: "https://www.figma.com/design/gt5OrufFH507cR554zLqPf/Central-Dev?node-id=13697-2470&t=qnXZyPdCkJS91PC5-1", productDoc: "https://github.com/gametheoryproduct/product/blob/main/Product%20Docs/Support%20Flows.md", receivedBy: "Srikar Gunnam, Puneeth K", updatedAt: "2026-01-20T17:28:00.000Z", createdAt: "2026-01-20T17:28:00.000Z" },
  { tags: "Tintin", taskName: "Home Screen Re-work", description: "A visual & ux refresh for home - new tiles and promotions", status: "Handed-over", assignee: "Kunal Verma", taskType: "ðŸ“ˆ Improvement", delivery: "2025-12-22", attachFile: "https://www.figma.com/design/gt5OrufFH507cR554zLqPf/Central-Dev?node-id=3875-15200&t=jBhmwc56B1jHb5o5-1", productDoc: "", receivedBy: "Puneeth K", updatedAt: "2025-12-22T16:34:00.000Z", createdAt: "2025-12-22T16:34:00.000Z" },
  { tags: "Tintin", taskName: "Academy - Scheduling", description: "Changing the original coaching bit to enable sport & venue selection", status: "Handed-over", assignee: "Kunal Verma", taskType: "â­ï¸ Feature", delivery: "2025-12-22", attachFile: "https://www.figma.com/design/ob95EWOZS7B9R3G0pmyIyI/Academy-Dev?node-id=121-2155&t=lH5KFtmBufvTVFTU-1", productDoc: "", receivedBy: "Puneeth K", updatedAt: "2025-12-22T16:34:00.000Z", createdAt: "2025-12-22T16:34:00.000Z" },
  { tags: "Tintin", taskName: "Academy - Sport Swap & Switch", description: "Allowing users to swap & switch their sports with others", status: "Handed-over", assignee: "Kunal Verma", taskType: "â­ï¸ Feature", delivery: "2025-12-16", attachFile: "https://www.figma.com/design/ob95EWOZS7B9R3G0pmyIyI/Academy-Dev?node-id=26-8603&t=lH5KFtmBufvTVFTU-1", productDoc: "", receivedBy: "Puneeth K", updatedAt: "2025-12-22T15:59:00.000Z", createdAt: "2025-12-22T15:59:00.000Z" },
  { tags: "Tintin", taskName: "Academy - Onboarding", description: "Onboard Academy user post purchase", status: "Handed-over", assignee: "Kunal Verma", taskType: "â­ï¸ Feature", delivery: "2025-12-16", attachFile: "https://www.figma.com/design/ob95EWOZS7B9R3G0pmyIyI/Academy-Dev?node-id=1-11&t=lH5KFtmBufvTVFTU-1", productDoc: "https://github.com/gametheoryproduct/product/blob/main/docs/Academy/Product%20Requirements%20Document.md", receivedBy: "Puneeth K", updatedAt: "2025-12-22T15:58:00.000Z", createdAt: "2025-12-22T15:58:00.000Z" },
  { tags: "Tintin", taskName: "All Access - Guest Invites (Temp)", description: "Enabling customers to invite guests to games with limited monthly invites", status: "Handed-over", assignee: "Kunal Verma", taskType: "â­ï¸ Feature", delivery: "2025-11-17", attachFile: "https://www.figma.com/design/ec91teY3idAyd1v4EE5les/Play-Dev?node-id=15819-35388&t=BfBxeO9HoQ4mefPX-1", productDoc: "https://www.notion.so/Guest-Invites-2aedc66099b2805d8065f05132fb2f9c?source=copy_link", receivedBy: "Puneeth K", updatedAt: "2025-11-18T11:35:00.000Z", createdAt: "2025-11-18T11:35:00.000Z" },
  { tags: "Tintin", taskName: "All Access - Preference Capture", description: "5-step questionnaire to collect preferred sports, locations and game types", status: "Handed-over", assignee: "Kunal Verma", taskType: "â­ï¸ Feature", delivery: "2025-11-06", attachFile: "https://www.figma.com/design/ec91teY3idAyd1v4EE5les/Play-Dev?node-id=12915-3495&t=wzuR3ToSn4XBD1ny-1", productDoc: "https://www.notion.so/User-Preferences-29ddc66099b2806195b5d02476b57301?source=copy_link", receivedBy: "Puneeth K", updatedAt: "2025-12-22T15:59:00.000Z", createdAt: "2025-12-22T15:59:00.000Z" },
  { tags: "Tintin", taskName: "All Access - Pause", description: "Allowing users to pause plan and resume plan through profile and schedule", status: "Handed-over", assignee: "Kunal Verma", taskType: "â­ï¸ Feature", delivery: "2025-11-06", attachFile: "https://www.figma.com/design/ec91teY3idAyd1v4EE5les/Play-Dev?node-id=15006-17388&t=wzuR3ToSn4XBD1ny-1", productDoc: "", receivedBy: "Puneeth K", updatedAt: "2025-12-22T15:59:00.000Z", createdAt: "2025-12-22T15:59:00.000Z" },
  { tags: "Tintin", taskName: "All Access - Trials", description: "Allow users to try All Access Sessions for free and lead to to purchasing", status: "Handed-over", assignee: "Kunal Verma", taskType: "â­ï¸ Feature", delivery: "2025-10-28", attachFile: "https://www.figma.com/design/ec91teY3idAyd1v4EE5les/Play-Dev?node-id=14960-69157&t=ltOkJg0Sp9rlWBEv-1", productDoc: "https://www.notion.so/New-Membership-Trial-Flows-26cdc66099b280ac9952f68d9ce71328?source=copy_link", receivedBy: "Puneeth K", updatedAt: "2025-10-28T16:14:00.000Z", createdAt: "2025-10-28T16:14:00.000Z" },
  { tags: "Tintin", taskName: "All Access - Entry for Coaching & Membership", description: "Bottom-sheets to route users to kid's coaching and swimming membership", status: "Handed-over", assignee: "Kunal Verma", taskType: "ðŸ”§ Fix", delivery: "2025-10-27", attachFile: "https://www.figma.com/design/gt5OrufFH507cR554zLqPf/Central-Dev?node-id=3875-15200&t=ZEtWyLWqj7ioKfyZ-1", productDoc: "", receivedBy: "", updatedAt: "2025-11-07T11:55:00.000Z", createdAt: "2025-11-07T11:55:00.000Z" },
  { tags: "Tintin", taskName: "All Access - Court Info & My Bookings", description: "Adding court/turf details to all info components, as well as My Bookings", status: "Handed-over", assignee: "Kunal Verma", taskType: "ðŸ“ˆ Improvement", delivery: "2025-10-27", attachFile: "https://www.figma.com/design/ec91teY3idAyd1v4EE5les/Play-Dev?node-id=13390-8744&t=ltOkJg0Sp9rlWBEv-1", productDoc: "", receivedBy: "", updatedAt: "2025-10-28T16:12:00.000Z", createdAt: "2025-10-28T16:12:00.000Z" },
  { tags: "Tintin", taskName: "All Access - Guest Pass", description: "Enable friends to experience All Access for X days", status: "Handed-over", assignee: "Kunal Verma", taskType: "â­ï¸ Feature", delivery: "2025-10-14", attachFile: "https://www.figma.com/design/ec91teY3idAyd1v4EE5les/Play-Dev?node-id=14032-89860&t=Yv4EAiyv2xYsFUsT-1", productDoc: "https://www.notion.so/Guest-Passes-279dc66099b280f588e6d2ad4123e047?source=copy_link", receivedBy: "Puneeth K", updatedAt: "2025-10-15T11:06:00.000Z", createdAt: "2025-10-15T11:06:00.000Z" },
  { tags: "Tintin", taskName: "All Access - Scheduling", description: "Scheduling games, coaching, gym sessions and events", status: "Handed-over", assignee: "Kunal Verma", taskType: "â­ï¸ Feature", delivery: "2025-10-01", attachFile: "https://www.figma.com/design/ec91teY3idAyd1v4EE5les/Play-Dev?node-id=13390-8744&t=ZnP570uwNTxt2sc6-1", productDoc: "https://www.notion.so/Scheduling-All-Access-Memberships-273dc66099b280e9bc80d6a87dcac389?source=copy_link", receivedBy: "Puneeth K", updatedAt: "2025-10-10T11:04:00.000Z", createdAt: "2025-10-10T11:04:00.000Z" },
  { tags: "Tintin", taskName: "All Access - Purchasing", description: "Entry point from home & till payment", status: "Handed-over", assignee: "Kunal Verma", taskType: "â­ï¸ Feature", delivery: "2025-09-25", attachFile: "https://www.figma.com/design/ec91teY3idAyd1v4EE5les/Play-Dev?node-id=12915-3495&t=ZnP570uwNTxt2sc6-1", productDoc: "https://www.notion.so/All-Access-Membership-Billing-272dc66099b28053adeae8f54be0bf68?source=copy_link", receivedBy: "Puneeth K", updatedAt: "2025-10-06T11:41:00.000Z", createdAt: "2025-10-06T11:41:00.000Z" },
  { tags: "Tintin", taskName: "All Access - Landing Page", description: "Content and details", status: "Handed-over", assignee: "Kunal Verma", taskType: "â­ï¸ Feature", delivery: "2025-09-25", attachFile: "https://www.figma.com/design/ec91teY3idAyd1v4EE5les/Play-Dev?node-id=12915-3495&t=ZnP570uwNTxt2sc6-1", productDoc: "", receivedBy: "Puneeth K", updatedAt: "2025-10-06T11:40:00.000Z", createdAt: "2025-10-06T11:40:00.000Z" },
  { tags: "Tintin", taskName: "All Access - Management 1.0", description: "Plan view post purchase", status: "Handed-over", assignee: "Kunal Verma", taskType: "â­ï¸ Feature", delivery: "2025-09-25", attachFile: "https://www.figma.com/design/ec91teY3idAyd1v4EE5les/Play-Dev?node-id=12915-3495&t=ZnP570uwNTxt2sc6-1", productDoc: "", receivedBy: "Puneeth K", updatedAt: "2025-10-06T11:40:00.000Z", createdAt: "2025-10-06T11:40:00.000Z" },
  { tags: "Nexus", taskName: "All Access - Trial Flows", description: "Trial flow for Memberships to allow new adult users (18+) to experience the product", status: "In progress", assignee: "Akash Roy", taskType: "â­ï¸ Feature", delivery: "2025-10-03", attachFile: "", productDoc: "https://www.notion.so/New-Membership-Trial-Flows-26cdc66099b280ac9952f68d9ce71328", receivedBy: "", updatedAt: "2025-11-07T11:56:00.000Z", createdAt: "2025-11-07T11:56:00.000Z" },
  { tags: "Nexus", taskName: "All Access - Check-ins", description: "Enable seamless and self-initiated face-based check-in for all access members", status: "Handed-over", assignee: "Akash Roy", taskType: "ðŸ“ˆ Improvement", delivery: "2025-10-05", attachFile: "https://www.figma.com/design/6wjzW0LYnFhQaZ9vywz730/Nexus-Development?node-id=4483-16817", productDoc: "https://www.notion.so/Check-in-s-278dc66099b2808f859ce474d01e0f23?v=256dc66099b281ba98ad000c54fa6246&source=copy_link", receivedBy: "Akhil Varma, Chandan Shrivastava", updatedAt: "2025-10-28T15:15:00.000Z", createdAt: "2025-10-28T15:15:00.000Z" },
  { tags: "Nexus", taskName: "All Access - Game Roster", description: "Enable staff to create recurring Membership Community games", status: "Handed-over", assignee: "Akash Roy", taskType: "â­ï¸ Feature", delivery: "2025-09-25", attachFile: "https://www.figma.com/design/6wjzW0LYnFhQaZ9vywz730/Nexus-Development?node-id=4455-1407", productDoc: "https://www.notion.so/Game-Roster-26adc66099b280a28d97f81121b43571", receivedBy: "Akhil Varma, Chandan Shrivastava", updatedAt: "2025-10-06T11:40:00.000Z", createdAt: "2025-10-06T11:40:00.000Z" },
  { tags: "Nexus", taskName: "All Access - Discounts, Coupons changes", description: "Changes for creation and usage of Offers due to launch of All Access", status: "Handed-over", assignee: "Akash Roy", taskType: "ðŸ“ˆ Improvement", delivery: "2025-09-22", attachFile: "https://www.figma.com/design/6wjzW0LYnFhQaZ9vywz730/Nexus-Development?node-id=4295-19346", productDoc: "https://www.notion.so/Discounts-Coupons-Changes-273dc66099b28055af09cbffee54a704?v=256dc66099b281ba98ad000c54fa6246&source=copy_link", receivedBy: "Akhil Varma", updatedAt: "2025-11-07T11:55:00.000Z", createdAt: "2025-11-07T11:55:00.000Z" },
  { tags: "Nexus", taskName: "All Access - Members Page", description: "See a customer's membership plan", status: "Handed-over", assignee: "Akash Roy", taskType: "â­ï¸ Feature", delivery: "2025-09-26", attachFile: "https://www.figma.com/design/6wjzW0LYnFhQaZ9vywz730/Nexus-Development?node-id=4338-6195&p=f&t=1Wsg3GLyHerJ18pO-0", productDoc: "https://www.notion.so/Members-Page-273dc66099b280bead10c058d79bbcd4?source=copy_link", receivedBy: "Chandan Shrivastava", updatedAt: "2025-10-06T11:40:00.000Z", createdAt: "2025-10-06T11:40:00.000Z" },
  { tags: "Nexus", taskName: "All Access - Upgrades", description: "Upgrade an existing customer to all access plans", status: "Handed-over", assignee: "Akash Roy", taskType: "ðŸ“ˆ Improvement", delivery: "2025-09-26", attachFile: "https://www.figma.com/design/6wjzW0LYnFhQaZ9vywz730/Nexus-Development?node-id=4338-6195&p=f&t=1Wsg3GLyHerJ18pO-0", productDoc: "https://www.notion.so/Members-Page-273dc66099b280bead10c058d79bbcd4?source=copy_link", receivedBy: "Chandan Shrivastava", updatedAt: "2025-10-06T11:40:00.000Z", createdAt: "2025-10-06T11:40:00.000Z" },
  { tags: "Nexus", taskName: "All Access - Billing flow", description: "Add an additional tab in billing for All Access Memberships", status: "Handed-over", assignee: "Akash Roy", taskType: "â­ï¸ Feature", delivery: "2025-09-24", attachFile: "https://www.figma.com/design/6wjzW0LYnFhQaZ9vywz730/Nexus-Development?node-id=4269-13779", productDoc: "https://www.notion.so/All-Access-Membership-Billing-272dc66099b28053adeae8f54be0bf68?v=256dc66099b281ba98ad000c54fa6246&source=copy_link", receivedBy: "Akhil Varma", updatedAt: "2025-10-06T11:40:00.000Z", createdAt: "2025-10-06T11:40:00.000Z" },
  { tags: "Halo", taskName: "All Access - Checkins", description: "Self-initiated face-based check-in for members", status: "Not started", assignee: "", taskType: "", delivery: "", attachFile: "", productDoc: "", receivedBy: "", updatedAt: "2025-10-07T12:19:00.000Z", createdAt: "2025-10-07T12:19:00.000Z" },
  { tags: "Tintin", taskName: "Home Revamp", description: "Segregation of all current features & new entry-points", status: "Handed-over", assignee: "Kunal Verma", taskType: "ðŸ“ˆ Improvement", delivery: "2025-09-23", attachFile: "https://www.figma.com/design/gt5OrufFH507cR554zLqPf/Central-Dev?node-id=3875-15200&t=aBspZwr9m1dDNAzN-1", productDoc: "", receivedBy: "", updatedAt: "2025-09-26T16:20:00.000Z", createdAt: "2025-09-26T16:20:00.000Z" },
  { tags: "Tintin", taskName: "Skill score onboarding", description: "Introduction & visibility of skill score", status: "Handed-over", assignee: "Kunal Verma", taskType: "â­ï¸ Feature", delivery: "2025-09-10", attachFile: "https://www.figma.com/design/ec91teY3idAyd1v4EE5les/Play-Dev?node-id=12616-27533&t=flc7rDCN7TsoIlIN-1", productDoc: "", receivedBy: "", updatedAt: "2025-09-19T15:54:00.000Z", createdAt: "2025-09-19T15:54:00.000Z" },
  { tags: "Tintin", taskName: "Coaching Improvements", description: "Engagement cards in coaching + class cancel", status: "In review", assignee: "Kunal Verma", taskType: "ðŸ“ˆ Improvement", delivery: "2025-09-05", attachFile: "https://www.figma.com/design/cythD8mL0w99hjtWTDBRym/Coaching-Dev?node-id=2314-13848&t=m99lZvfezfSU7lz4-1", productDoc: "", receivedBy: "", updatedAt: "2025-09-08T11:47:00.000Z", createdAt: "2025-09-08T11:47:00.000Z" },
  { tags: "Tintin", taskName: "Coaching Delight", description: "Engagement and delight for coaching", status: "Handed-over", assignee: "Kunal Verma", taskType: "â­ï¸ Feature", delivery: "2025-09-05", attachFile: "https://www.figma.com/design/cythD8mL0w99hjtWTDBRym/Coaching-Dev?node-id=12771-27299&t=m99lZvfezfSU7lz4-1", productDoc: "", receivedBy: "", updatedAt: "2025-09-06T16:04:00.000Z", createdAt: "2025-09-06T16:04:00.000Z" },
  { tags: "Tintin", taskName: "Pickleball Coaching Launch", description: "Pickleball assets for coaching", status: "Handed-over", assignee: "Kunal Verma", taskType: "â­ï¸ Feature", delivery: "2025-09-02", attachFile: "https://www.figma.com/design/cythD8mL0w99hjtWTDBRym/Coaching-Dev?node-id=4139-18845&t=WTVPDlvyDN3zF5Ch-1", productDoc: "", receivedBy: "", updatedAt: "2025-09-05T12:54:00.000Z", createdAt: "2025-09-05T12:54:00.000Z" },
  { tags: "Tintin", taskName: "Slot Cancellation Message", description: "Within 24-hour cancellation message", status: "Handed-over", assignee: "Kunal Verma", taskType: "ðŸ”§ Fix", delivery: "2025-09-01", attachFile: "https://www.figma.com/design/ec91teY3idAyd1v4EE5les/Play-Dev?node-id=12484-19928&t=rshIhcxxKICcXyVP-1", productDoc: "", receivedBy: "", updatedAt: "2025-09-05T12:54:00.000Z", createdAt: "2025-09-05T12:54:00.000Z" },
  { tags: "Tintin", taskName: "Coaching Scheduling Improvements", description: "Better cards and same-day class callout", status: "Handed-over", assignee: "Kunal Verma", taskType: "ðŸ”§ Fix", delivery: "2025-09-01", attachFile: "https://www.figma.com/design/cythD8mL0w99hjtWTDBRym/Coaching-Dev?node-id=2314-13848&t=WTVPDlvyDN3zF5Ch-1", productDoc: "", receivedBy: "", updatedAt: "2025-09-05T12:53:00.000Z", createdAt: "2025-09-05T12:53:00.000Z" },
  { tags: "Tintin", taskName: "Coaching Journey", description: "Coaching Certificate - engagement journey", status: "Handed-over", assignee: "Kunal Verma", taskType: "â­ï¸ Feature", delivery: "2025-08-29", attachFile: "https://www.figma.com/design/cythD8mL0w99hjtWTDBRym/Coaching-Dev?node-id=12771-27299&t=m99lZvfezfSU7lz4-1", productDoc: "", receivedBy: "", updatedAt: "2025-09-05T13:01:00.000Z", createdAt: "2025-09-05T13:01:00.000Z" },
  { tags: "Tintin", taskName: "Community Discovery Improvements", description: "Better cards & filtering + new chips", status: "Handed-over", assignee: "Kunal Verma", taskType: "ðŸ“ˆ Improvement", delivery: "2025-08-11", attachFile: "https://www.figma.com/design/ec91teY3idAyd1v4EE5les/Play-Dev?node-id=10265-2990&t=V4LwH8ILyEHUFALR-1", productDoc: "", receivedBy: "", updatedAt: "2025-09-05T13:14:00.000Z", createdAt: "2025-09-05T13:14:00.000Z" },
  { tags: "Tintin", taskName: "Community Engagement Improvements", description: "Revamped Game page + Early bird Discount", status: "Handed-over", assignee: "Kunal Verma", taskType: "ðŸ“ˆ Improvement", delivery: "2025-08-11", attachFile: "https://www.figma.com/design/ec91teY3idAyd1v4EE5les/Play-Dev?node-id=10265-2989&t=V4LwH8ILyEHUFALR-1", productDoc: "", receivedBy: "", updatedAt: "2025-09-05T13:17:00.000Z", createdAt: "2025-09-05T13:17:00.000Z" },
  { tags: "Tintin", taskName: "Ladder Chat & Preference Selector", description: "Enable chat & selection of challenge preferences", status: "Handed-over", assignee: "Kunal Verma", taskType: "â­ï¸ Feature", delivery: "2025-08-08", attachFile: "https://www.figma.com/design/gt5OrufFH507cR554zLqPf/Central-Dev?node-id=8722-41686&t=8VmckLzUT6CHkSM1-1", productDoc: "", receivedBy: "", updatedAt: "2025-09-05T12:54:00.000Z", createdAt: "2025-09-05T12:54:00.000Z" },
];

export async function GET() {
  try {
    const db = await getDb();
    const count = await db.collection("tasks").countDocuments();
    if (count > 0) {
      return NextResponse.json({ message: `Already seeded (${count} tasks)`, seeded: false });
    }
    const result = await db.collection("tasks").insertMany(SEED_DATA);
    return NextResponse.json({ message: `Seeded ${result.insertedCount} tasks`, seeded: true });
  } catch (error) {
    console.error("Seed error:", error);
    return NextResponse.json({ error: "Seed failed" }, { status: 500 });
  }
}

// Force re-seed (useful for reset)
export async function POST() {
  try {
    const db = await getDb();
    await db.collection("tasks").deleteMany({});
    const result = await db.collection("tasks").insertMany(SEED_DATA);
    return NextResponse.json({ message: `Re-seeded ${result.insertedCount} tasks`, seeded: true });
  } catch (error) {
    console.error("Seed error:", error);
    return NextResponse.json({ error: "Seed failed" }, { status: 500 });
  }
}
